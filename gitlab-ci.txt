---
build-job:
  stage: build
  script:
    - npm install
    - docker build -tag bfn715/cs4783-spring2021-api Dockerfile-api
    - docker login --username bfn715 --password <GITLAB VAR DOCKERHUB TOKEN>
    - docker push bfn715/cs4783-spring2021-api
    - export KUBECONFIG=$KUBECONFIG:<GITLAB VAR CONFIG>

curl-test-job:
  stage: test
  script:
    - echo "Running CURL tests..."
    - chmod +x ./test/curl/*.sh
    - ./test/curl/curl_tests.sh

deliver-job:
  stage: deploy
  script:
    - kubectl apply -f .\mio755-api-deployment.yaml
    - kubectl apply -f .\mio755-api-service.yaml
    - kubectl rollout restart <your deployment name> --kubeconfig ./<your deployment script>
...
